<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="./css/index.css">
    <link rel="stylesheet" type="text/css" href="./css/login.css">
    <script type="text/javascript" src="./myjs/jquery/jquery.min.js"></script>
</head>
<body>
    <div id="loginContainer" class="loginContainerClass">
        <div id="loginPanel">
            <div id="subLoginPanel">
                <div id="subLoginPanel_title">欢迎登录斑码编程在线教室</div>
                <div id="subLoginPanel_tabTool">
                    <div class="divBtn">用二维码扫描登录</div>
                    <div class="divBtn">用手机短信验证码登录</div>
                </div>
                <div id="subLoginPanel_2code" class="subLoginPanel_contentClass">
                    <!--<img src="https://open.weixin.qq.com/connect/qrcode/001p5eQ82dSIklCS">-->
                    <div id="subLoginPanel_2codeImg">
                    </div>
                    <div id="subLoginPanel_2codeDes">手机打开微信 扫描二维码登录</div>
                </div>
                <div id="subLoginPanel_mobilePhone" class="subLoginPanel_contentClass" style="display: none;">
                    <form id="mobilePhoneLoginForm">
                        <div id="bg_mobile"><input type="text" placeholder="手机号" id="tb_mobile" maxlength="11" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"></div>
                        <div id="bg_regule"><input type="text" placeholder="验证码" id="tb_regule" maxlength="8" onkeyup="value=value.replace(/[\W]/g,'') " onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[^\d]/g,''))"></div>
                        <div id="bg_getRegule" class="divBtn">获取验证码</div>
                        <div id="btn_joinClassRoom" class="divBtn">进入教室</div>
                        <div id="btn_forgetPWD" class="divBtn">忘记密码?</div>
                    </form>
                </div>
            </div>
            <div id="gongsibeian">北京启迪开智教育科技有限公司 京ICP备 17051215号-1</div>
        </div>
    </div>
    <script type="text/javascript">
        $("#btn_joinClassRoom").click(function(){
            window.location.href = "./index.html?pageTag=code2Mode";
        });
        var red_uri = window.encodeURI("https://bmcode.com/api/webwechat");
        var href_uri = window.encodeURI("https://www.bmcode.com/css/weixinCode.css");
        /**
         * 二维码图片生成,在HTTP或者本地看不到效果,必须把css和当前的html部署到https服务器上才有效果
         * */
        var obj = new WxLogin({
            id:"subLoginPanel_2codeImg",
            appid: "wx140a1181b685998a",
            scope: "snsapi_login",
            redirect_uri: red_uri,
            state: "STATE#wechat_redirect",
            style: "",
            href:href_uri
        });


//
        console.log(4)
        var frameContentTimerId = setTimeout(function(){
            console.log(window.frames)
//            if(document.frames && document.frames.count > 0){
//                var tempIframe = document.frames[0];
//                var arr = tempIframe.contentWindow.document.getElementsByName("normalPanel")
//                console.log(arr)
//            }
        },500)
//        $.ajax({
//            url:"https://open.weixin.qq.com/connect/qrconnect?appid=wx140a1181b685998a&redirect_uri=http%3A%2F%2Fbmcode.com%2Fwebwechat&response_type=code&scope=snsapi_login&state=STATE#wechat_redirect",
//            dataType:"html",
//            timeout:30,
//            success:function(data){
//                if(data){
//                    console.log(data);
//                }
//            }
//        });
    </script>
</body>
</html>